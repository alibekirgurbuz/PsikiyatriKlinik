@{
    ViewData["Title"] = "Randevular";
    Layout = "~/Views/Shared/_AdminLayout.cshtml";
}

<div class="container-fluid px-4">
    <h1 class="mt-4">Randevular</h1>
    <ol class="breadcrumb mb-4">
        <li class="breadcrumb-item active">Randevu Yönetimi</li>
    </ol>

    <div class="card mb-4">
        <div class="card-header">
            <i class="fas fa-calendar me-1"></i>
            Randevu Listesi
            <button class="btn btn-primary float-end" data-bs-toggle="modal" data-bs-target="#addAppointmentModal">
                <i class="fas fa-plus"></i> Yeni Randevu Ekle
            </button>
        </div>
        <div class="card-body">
            <!-- Sekmeler -->
            <ul class="nav nav-tabs mb-3" id="appointmentTabs" role="tablist">
                <li class="nav-item" role="presentation">
                    <button class="nav-link active" id="upcoming-tab" data-bs-toggle="tab" data-bs-target="#upcoming" type="button" role="tab">
                        <i class="fas fa-calendar-check me-1"></i> Gelecek Randevular
                    </button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link" id="waiting-tab" data-bs-toggle="tab" data-bs-target="#waiting" type="button" role="tab">
                        <i class="fas fa-clock me-1"></i> Bekleyen Randevular
                    </button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link" id="past-tab" data-bs-toggle="tab" data-bs-target="#past" type="button" role="tab">
                        <i class="fas fa-history me-1"></i> Geçmiş Randevular
                    </button>
                </li>
            </ul>

            <!-- Sekme İçerikleri -->
            <div class="tab-content" id="appointmentTabsContent">
                <!-- Gelecek Randevular -->
                <div class="tab-pane fade show active" id="upcoming" role="tabpanel">
                    <table id="upcomingAppointmentsTable" class="table table-striped table-bordered">
                        <thead>
                            <tr>
                                <th>Hasta Adı</th>
                                <th>Hasta Soyadı</th>
                                <th>Yaş</th>
                                <th>Doktor</th>
                                <th>Branş</th>
                                <th>Randevu Tarihi</th>
                                <th>İşlemler</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Ali</td>
                                <td>Yılmaz</td>
                                <td>35</td>
                                <td>Dr. Ahmet Yılmaz</td>
                                <td>Psikiyatri</td>
                                <td>2024-02-20 14:30</td>
                                <td>
                                    <button class="btn btn-sm btn-success" title="Onayla">
                                        <i class="fas fa-check"></i>
                                    </button>
                                    <button class="btn btn-sm btn-warning" title="İptal Et">
                                        <i class="fas fa-times"></i>
                                    </button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <!-- Bekleyen Randevular -->
                <div class="tab-pane fade" id="waiting" role="tabpanel">
                    <table id="waitingAppointmentsTable" class="table table-striped table-bordered">
                        <thead>
                            <tr>
                                <th>Hasta Adı</th>
                                <th>Hasta Soyadı</th>
                                <th>Yaş</th>
                                <th>Doktor</th>
                                <th>Branş</th>
                                <th>Randevu Tarihi</th>
                                <th>İşlemler</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Ayşe</td>
                                <td>Kaya</td>
                                <td>42</td>
                                <td>Dr. Ayşe Kaya</td>
                                <td>Psikiyatri</td>
                                <td>2024-02-20 15:00</td>
                                <td>
                                    <button class="btn btn-sm btn-success" title="Onayla">
                                        <i class="fas fa-check"></i>
                                    </button>
                                    <button class="btn btn-sm btn-warning" title="İptal Et">
                                        <i class="fas fa-times"></i>
                                    </button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <!-- Geçmiş Randevular -->
                <div class="tab-pane fade" id="past" role="tabpanel">
                    <table id="pastAppointmentsTable" class="table table-striped table-bordered">
                        <thead>
                            <tr>
                                <th>Hasta Adı</th>
                                <th>Hasta Soyadı</th>
                                <th>Yaş</th>
                                <th>Doktor</th>
                                <th>Branş</th>
                                <th>Randevu Tarihi</th>
                                <th>Durum</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Mehmet</td>
                                <td>Demir</td>
                                <td>28</td>
                                <td>Dr. Mehmet Demir</td>
                                <td>Psikiyatri</td>
                                <td>2024-02-19 10:00</td>
                                <td><span class="badge bg-success">Tamamlandı</span></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Yeni Randevu Ekleme Modal -->
<div class="modal fade" id="addAppointmentModal" tabindex="-1" aria-labelledby="addAppointmentModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="addAppointmentModalLabel">Yeni Randevu Ekle</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <form>
                    <div class="mb-3">
                        <label for="patientName" class="form-label">Hasta Adı</label>
                        <input type="text" class="form-control" id="patientName" required>
                    </div>
                    <div class="mb-3">
                        <label for="patientSurname" class="form-label">Hasta Soyadı</label>
                        <input type="text" class="form-control" id="patientSurname" required>
                    </div>
                    <div class="mb-3">
                        <label for="patientAge" class="form-label">Yaş</label>
                        <input type="number" class="form-control" id="patientAge" required>
                    </div>
                    <div class="mb-3">
                        <label for="doctorSelect" class="form-label">Doktor</label>
                        <select class="form-select" id="doctorSelect" required>
                            <option value="">Doktor Seçin</option>
                            <option value="1">Dr. Ahmet Yılmaz - Psikiyatri</option>
                            <option value="2">Dr. Ayşe Kaya - Psikiyatri</option>
                            <option value="3">Dr. Mehmet Demir - Psikiyatri</option>
                        </select>
                    </div>
                    <div class="mb-3">
                        <label for="appointmentDate" class="form-label">Randevu Tarihi</label>
                        <input type="datetime-local" class="form-control" id="appointmentDate" required>
                    </div>
                    <div class="mb-3">
                        <label for="appointmentNotes" class="form-label">Notlar</label>
                        <textarea class="form-control" id="appointmentNotes" rows="3"></textarea>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">İptal</button>
                <button type="button" class="btn btn-primary">Kaydet</button>
            </div>
        </div>
    </div>
</div>

@section Scripts {
    <script>
        $(document).ready(function() {
            // Gelecek Randevular Tablosu
            $('#upcomingAppointmentsTable').DataTable({
                language: {
                    url: '//cdn.datatables.net/plug-ins/1.13.7/i18n/tr.json'
                },
                responsive: true,
                dom: 'Bfrtip',
                buttons: [
                    'copy', 'excel', 'pdf', 'print'
                ]
            });

            // Bekleyen Randevular Tablosu
            $('#waitingAppointmentsTable').DataTable({
                language: {
                    url: '//cdn.datatables.net/plug-ins/1.13.7/i18n/tr.json'
                },
                responsive: true,
                dom: 'Bfrtip',
                buttons: [
                    'copy', 'excel', 'pdf', 'print'
                ]
            });

            // Geçmiş Randevular Tablosu
            $('#pastAppointmentsTable').DataTable({
                language: {
                    url: '//cdn.datatables.net/plug-ins/1.13.7/i18n/tr.json'
                },
                responsive: true,
                dom: 'Bfrtip',
                buttons: [
                    'copy', 'excel', 'pdf', 'print'
                ]
            });
        });
    </script>
}

